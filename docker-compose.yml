version: '2'
services:
 alpine:
  build:
   context: alpine
   args:
    auth: jepson
    email: wjp13671142513@163.com
  image: jepson/alpine_1
  container_name: alpine_1
  restart: 'no'

 store:
  build:
   context: store
   args:
    auth: jepson
    email: wjp13671142513@163.com
  image: jepson/store_1
  container_name: store_1
  depends_on:
   - "alpine"
  volumes:
   - C:\Users\wjp13\projects\data:/data
  restart: always

 memcached:
  build:
   context: memcached
   args:
    auth: jepson
    email: wjp13671142513@163.com
  image: jepson/memcached_1
  container_name: memcached_1
  depends_on:
   - "alpine"
  restart: always

  php:
  		build:php
  		image:jepson/php
  		depends_on:
  			- "alpine"
  		links:
  			- memcached
  		volumes:
  			- "/data/docker/php/:/app"
  		volumes_from:
  			- "store"
  		restart:always
  	nginx:
  		build:nginx
  		image:jepson/nginx
  		depends_on:
  			- "alpine"

  		links:
  			- "php"
  		volumes:
  			- "/data/docker/nginx/:/app"
  		volumes_from:
  			- "store"
  		ports:
  			- "80:80"
  		restart:always